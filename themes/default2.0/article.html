<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    <meta name="keywords" content="{{keyWords}}">
    <meta name="description" content="{{articleSingle.contentText}}">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    {{{OPT.codeBeforHead}}}

    <style>
        /* 复用首页核心样式 */
        :root {
            --primary-color: #4a90e2;
            --bg-color: #f4f6f8;
            --card-bg: #ffffff;
            --text-main: #333;
            --text-sub: #666;
            --header-height: 70px;
            --logo-max-height: 50px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.8;
        }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        a:hover { color: var(--primary-color); }
        ul { list-style: none; }
        
        .site-header { background: var(--card-bg); box-shadow: 0 2px 10px rgba(0,0,0,0.05); height: var(--header-height); position: sticky; top: 0; z-index: 100; }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; height: 100%; display: flex; justify-content: space-between; align-items: center; }
        .site-branding { display: flex; align-items: center; }
        .custom-logo { display: block; max-height: var(--logo-max-height); width: auto; object-fit: contain; }
        .site-title { font-size: 1.5rem; font-weight: 700; color: #333; }
        .site-nav ul { display: flex; gap: 20px; }
        .site-nav a { font-size: 0.95rem; font-weight: 500; color: var(--text-sub); }
        
        .site-content { display: grid; grid-template-columns: 1fr 300px; gap: 30px; margin: 30px auto; max-width: 1100px; padding: 0 20px; }
        
        /* --- 文章详情独有样式 --- */
        .article-card {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
        }
        .article-header { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .article-title { font-size: 2rem; font-weight: 700; margin-bottom: 15px; color: #222; }
        .article-meta { color: #999; font-size: 0.9rem; }
        .article-meta span { margin-right: 20px; }
        
        .article-body { font-size: 1.05rem; color: #444; }
        .article-body h2 { margin: 30px 0 15px; font-size: 1.5rem; border-left: 4px solid var(--primary-color); padding-left: 15px; background: #f9f9f9; line-height: 2; }
        .article-body h3 { margin: 25px 0 12px; font-size: 1.3rem; font-weight: 600; }
        .article-body p { margin-bottom: 20px; }
        .article-body img { max-width: 100%; height: auto; border-radius: 5px; margin: 10px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .article-body pre { background: #2d2d2d; color: #ccc; padding: 15px; border-radius: 5px; overflow-x: auto; margin-bottom: 20px; }
        .article-body blockquote { border-left: 4px solid #ddd; padding-left: 15px; color: #777; margin: 20px 0; font-style: italic; }

        .article-nav { margin-top: 40px; display: flex; justify-content: space-between; padding-top: 20px; border-top: 1px solid #eee; }
        .nav-btn { max-width: 45%; font-size: 0.9rem; color: var(--primary-color); }

        .widget { background: var(--card-bg); padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); margin-bottom: 25px; }
        .widget-title { font-size: 1.1rem; border-left: 4px solid var(--primary-color); padding-left: 10px; margin-bottom: 15px; font-weight: 600; }
        .widget ul li { padding: 8px 0; border-bottom: 1px dashed #eee; font-size: 0.9rem; }
        
        .site-footer { background: #fff; padding: 30px 0; text-align: center; margin-top: 50px; font-size: 0.9rem; color: #999; border-top: 1px solid #eee; }
        
        @media (max-width: 768px) {
            .site-content { grid-template-columns: 1fr; }
            .site-nav { display: none; }
            .article-card { padding: 20px; }
            .article-title { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <header class="site-header">
        <div class="container">
            <div class="site-branding">
                <a href="/">
                    <!-- ✨ 这里需要和 index.html 保持一致的 Logo 图片地址 ✨ -->
                    <img src="https://placehold.co/200x60/4a90e2/ffffff?text=My+Blog" 
                         alt="{{OPT.siteName}}" 
                         class="custom-logo"
                         onerror="this.style.display='none'; document.getElementById('text-logo').style.display='block';">
                    <span id="text-logo" class="site-title" style="display:none">{{OPT.siteName}}</span>
                </a>
            </div>
            <nav class="site-nav">
                <ul>
                    <!-- 修复：循环渲染菜单 -->
                    {{#widgetMenuList}}
                    <li><a href="{{url}}">{{title}}</a></li>
                    {{/widgetMenuList}}
                </ul>
            </nav>
        </div>
    </header>

    <div class="site-content">
        <main>
            {{#articleSingle}}
            <article class="article-card">
                <header class="article-header">
                    <h1 class="article-title">{{title}}</h1>
                    <div class="article-meta">
                        <span><i class="far fa-calendar-alt"></i> {{createDate10}}</span>
                        <span><i class="fas fa-tags"></i> {{tags}}</span>
                    </div>
                </header>
                <div class="article-body">
                    {{{contentHtml}}}
                </div>
            </article>
            {{/articleSingle}}

            <!-- 上一篇/下一篇 -->
            <div class="article-nav">
                {{#articleNewer}}
                <a href="{{url}}" class="nav-btn">← {{title}}</a>
                {{/articleNewer}}
                {{#articleOlder}}
                <a href="{{url}}" class="nav-btn" style="margin-left: auto;">{{title}} →</a>
                {{/articleOlder}}
            </div>

            <!-- 评论区 -->
            <div class="comments-area widget" style="margin-top: 30px;">
                {{{OPT.commentCode}}}
            </div>
        </main>

        <aside>
            <div class="widget">
                <h3 class="widget-title">最近更新</h3>
                <ul>
                    <!-- 修复：循环渲染最近更新 -->
                    {{#widgetRecentlyList}}
                    <li><a href="{{url}}">{{title}}</a></li>
                    {{/widgetRecentlyList}}
                </ul>
            </div>
            <div class="widget">
                <h3 class="widget-title">分类</h3>
                <ul>
                    <!-- 修复：循环渲染分类 -->
                    {{#widgetCategoryList}}
                    <li><a href="/category/{{.}}">{{.}}</a></li>
                    {{/widgetCategoryList}}
                </ul>
            </div>
            {{{OPT.widgetOther}}}
        </aside>
    </div>

    <footer class="site-footer">
        <div class="container">
            {{{OPT.copyRight}}}
        </div>
    </footer>

    {{{OPT.codeBeforBody}}}
</body>
</html>
